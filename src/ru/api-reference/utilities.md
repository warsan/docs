---
sidebarDepth: 2
---

# Служебные функции

## Вспомогательные утилиты

Эти методы пригодятся при реализации настраиваемых помощников.

### `Handlebars.SafeString(string)`

Предотвращает экранирование строки `string` при рендеринге шаблона.

```js
new Handlebars.SafeString("<div>HTML Content!</div>");
```

При создании строки, которая будет помечена как безопасная, любое внешнее содержимое должно быть правильно экранировано с помощью метода `Handlebars.escapeExpression`, чтобы избежать потенциальных проблем безопасности.

### `Handlebars.escapeExpression(string)`

HTML экранирует переданную строку, что делает его безопасным для отображения в виде текста в содержимом HTML.

```js
Handlebars.Utils.escapeExpression(string);
```

Заменяет `&`, `<`, `>`, `"`, `'`, `` ` ``, `=` эквивалентным значением объекта HTML для строковых значений. Значения `SafeString` остаются нетронутыми.

Вывод всех выражений, кроме выражений в тройных скобках, передаётся через этот метод. Помощники также должны использовать этот метод при возврате содержимого HTML через экземпляр `SafeString`, чтобы предотвратить возможное внедрение кода.

Этот метод имеет псевдоним `Handlebars.Utils.escapeExpression`.

### `Handlebars.createFrame(data)`

Используется помощниками блока для создания дочерних объектов данных.

```js
if (options.data) {
  var data = Handlebars.createFrame(options.data);
  data.foo = "bar";
  options.data = data;
}
```

Помощники, которые изменяют состояние данных, должны при этом создавать новый фрейм, чтобы изолировать себя и избежать повреждения состояния любых родителей. Как правило, для каждого выполнения помощника необходимо создать только один фрейм. Например, итератор `each` создаёт один кадр, который повторно используется для всего дочернего выполнения.

## Общие утилиты

Handlebars предлагает множество служебных методов, которые предоставляются через объект `Handlebars.Utils`.

### `Handlebars.Utils.isEmpty(value)`

Определяет, является ли данное значение пустым.

Handlebars.Utils.isEmpty(value)

Это используется встроенными помощниками `if` и `with` для управления потоком их выполнения. Определение пустого в Handlebars может быть любым из:

- Массив с длиной 0
- Ложные значения кроме 0

Это предназначено для соответствия [Mustache behavior](http://mustache.github.io/mustache.5.html#Sections).

### `Handlebars.Utils.extend(obj, value)`

Простой служебный метод для дополнения `obj` всеми ключами, определенными в `value`.

Handlebars.Utils.extend(foo, {bar: true})

Устанавливает ключ `bar` на объекте `foo` со значением `true`.

### `Handlebars.Utils.toString(obj)`

Универсальный метод `toString`.

### `Handlebars.Utils.isArray(obj)`

Определяет, является ли объект массивом.

### `Handlebars.Utils.isFunction(obj)`

Определяет, является ли объект функцией.

### `Handlebars.log(level, message)`

Регистратор, используемый помощником `log`.

При желании может быть переопределён.
